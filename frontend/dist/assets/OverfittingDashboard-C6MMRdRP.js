import{r as i,j as e,R as h,F as g,C as b,X as u,Y as y,T as f,L as j,H as p,I as l}from"./index-ChYP-lOC.js";function k(){const[r,n]=i.useState(null),[d,o]=i.useState(!0);i.useEffect(()=>{c()},[]);const c=async()=>{try{const s=await(await fetch("http://localhost:5000/api/analytics/overfitting-check")).json();s.status==="success"&&n(s.data)}catch(t){console.error("Error fetching overfitting data:",t)}finally{o(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading"})});if(!r)return e.jsx("div",{className:"text-center text-gray-500 p-8",children:"Veri bulunamadı"});const x=Object.entries(r).map(([t,s])=>({horizon:t==="H1"?"1 Ay":t==="H2"?"2 Ay":"3 Ay",train:(s.train_r2*100).toFixed(1),val:(s.val_r2*100).toFixed(1),test:(s.test_r2*100).toFixed(1),gap:(s.gap*100).toFixed(2)})),m=t=>{switch(t){case"low_risk":return e.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"✓ Düşük Risk"});case"medium_risk":return e.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium",children:"⚠ Orta Risk"});case"high_risk":return e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium",children:"✗ Yüksek Risk"});default:return null}},a=Object.values(r).every(t=>t.status==="low_risk")?"healthy":Object.values(r).some(t=>t.status==="high_risk")?"critical":"warning";return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:`mb-6 p-6 rounded-xl border-2 ${a==="healthy"?"bg-green-50 border-green-300":a==="critical"?"bg-red-50 border-red-300":"bg-yellow-50 border-yellow-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-xl font-bold mb-2 ${a==="healthy"?"text-green-800":a==="critical"?"text-red-800":"text-yellow-800"}`,children:a==="healthy"?"✅ Model Sağlıklı":a==="critical"?"🚨 Overfitting Tespit Edildi":"⚠️ Dikkat Gerekiyor"}),e.jsx("p",{className:`text-sm ${a==="healthy"?"text-green-700":a==="critical"?"text-red-700":"text-yellow-700"}`,children:a==="healthy"?"Model eğitimi başarılı, overfitting riski düşük":a==="critical"?"Model eğitim verisine aşırı uyum sağlamış, genelleme sorunu var":"Bazı horizon'larda overfitting riski mevcut"})]}),e.jsx("div",{className:`text-5xl ${a==="healthy"?"text-green-500":a==="critical"?"text-red-500":"text-yellow-500"}`,children:a==="healthy"?"✓":a==="critical"?"✗":"⚠"})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Train/Val/Test R² Karşılaştırması"}),e.jsx(h,{width:"100%",height:300,children:e.jsxs(g,{data:x,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(u,{dataKey:"horizon",style:{fontSize:"14px",fontWeight:500}}),e.jsx(y,{domain:[0,100],tickFormatter:t=>`${t}%`,style:{fontSize:"12px"}}),e.jsx(f,{formatter:t=>`${t}%`,contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"12px"}}),e.jsx(j,{}),e.jsx(p,{y:95,stroke:"#9ca3af",strokeDasharray:"3 3",label:{value:"Ideal: 95%",position:"right",fontSize:12}}),e.jsx(l,{type:"monotone",dataKey:"train",stroke:"#3b82f6",name:"Train R²",strokeWidth:2,dot:{fill:"#3b82f6",r:5}}),e.jsx(l,{type:"monotone",dataKey:"val",stroke:"#10b981",name:"Val R²",strokeWidth:2,dot:{fill:"#10b981",r:5}}),e.jsx(l,{type:"monotone",dataKey:"test",stroke:"#f59e0b",name:"Test R²",strokeWidth:2,dot:{fill:"#f59e0b",r:5}})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Object.entries(r).map(([t,s])=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-bold text-gray-800",children:[t==="H1"?"1 Ay":t==="H2"?"2 Ay":"3 Ay"," İleri"]}),m(s.status)]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Train R²:"}),e.jsxs("span",{className:"font-medium text-blue-600",children:[(s.train_r2*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Val R²:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[(s.val_r2*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Test R²:"}),e.jsxs("span",{className:"font-medium text-orange-600",children:[(s.test_r2*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"pt-2 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Gap:"}),e.jsxs("span",{className:`font-bold ${s.gap<.05?"text-green-600":s.gap<.1?"text-yellow-600":"text-red-600"}`,children:[(s.gap*100).toFixed(2),"%"]})]})})]}),e.jsx("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs text-gray-600",children:s.message})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📚 Overfitting Nedir?"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Model eğitim verisini ezberler ama yeni verilerde başarısız olur. Train R² çok yüksek ama Val/Test R² düşükse overfitting var demektir."})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"✓ Sağlıklı Model"}),e.jsx("p",{className:"text-sm text-green-700",children:"Train, Val ve Test R² değerleri birbirine yakınsa (gap <5%) model sağlıklıdır. Bu, modelin yeni verilerde de iyi tahmin yapacağını gösterir."})]})]})]})}export{k as default};
