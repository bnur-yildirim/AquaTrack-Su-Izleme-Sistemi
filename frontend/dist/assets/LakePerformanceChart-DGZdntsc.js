import{r,j as e,R as g,B as j,C as b,X as f,Y as p,T as u,L as y,a as N,b as v}from"./index-ChYP-lOC.js";function k(){const[n,c]=r.useState(null),[o,x]=r.useState(!0),[i,m]=r.useState("H1");r.useEffect(()=>{h()},[]);const h=async()=>{try{const a=await(await fetch("http://localhost:5000/api/analytics/lake-performance")).json();a.status==="success"&&c(a.data)}catch(s){console.error("Error fetching lake performance:",s)}finally{x(!1)}};if(o)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading"})});if(!n)return e.jsx("div",{className:"text-center text-gray-500 p-8",children:"Veri bulunamadı"});const l=Object.entries(n).map(([s,a])=>{const t=a.horizons[i]||{};return{name:a.lake_name,wmape:t.wmape||0,r2:(t.r2||0)*100,samples:t.samples||0,lakeId:s}}).sort((s,a)=>s.wmape-a.wmape),d=s=>s<2?"#10b981":s<5?"#3b82f6":s<10?"#f59e0b":"#ef4444";return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"mb-6 flex gap-3",children:["H1","H2","H3"].map(s=>e.jsxs("button",{onClick:()=>m(s),className:`px-4 py-2 rounded-lg font-medium transition-all ${i===s?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[s==="H1"?"1 Ay":s==="H2"?"2 Ay":"3 Ay"," İleri"]},s))}),e.jsx(g,{width:"100%",height:400,children:e.jsxs(j,{data:l,margin:{top:20,right:30,left:20,bottom:60},children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(f,{dataKey:"name",angle:-45,textAnchor:"end",height:100,style:{fontSize:"12px"}}),e.jsx(p,{label:{value:"WMAPE (%)",angle:-90,position:"insideLeft"},style:{fontSize:"12px"}}),e.jsx(u,{content:({active:s,payload:a})=>{if(s&&a&&a.length){const t=a[0].payload;return e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border border-gray-200",children:[e.jsx("div",{className:"font-bold text-gray-800 mb-2",children:t.name}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-gray-600",children:"WMAPE:"}),e.jsxs("span",{className:"font-bold",style:{color:d(t.wmape)},children:[t.wmape.toFixed(2),"%"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-gray-600",children:"R²:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[t.r2.toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{className:"text-gray-600",children:"Veri:"}),e.jsxs("span",{className:"font-bold text-gray-700",children:[t.samples," kayıt"]})]}),t.samples<500&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:e.jsx("span",{className:"text-orange-600 text-xs font-medium",children:"⚠️ Sınırlı veri"})})]})]})}return null}}),e.jsx(y,{}),e.jsx(N,{dataKey:"wmape",name:"WMAPE (Hata Yüzdesi)",radius:[8,8,0,0],children:l.map((s,a)=>e.jsx(v,{fill:d(s.wmape)},`cell-${a}`))})]})}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-600 font-semibold mb-1",children:"Mükemmel"}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:l.filter(s=>s.wmape<2).length}),e.jsx("div",{className:"text-xs text-green-600",children:"göl (<2% hata)"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-600 font-semibold mb-1",children:"İyi"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:l.filter(s=>s.wmape>=2&&s.wmape<5).length}),e.jsx("div",{className:"text-xs text-blue-600",children:"göl (2-5% hata)"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-sm text-yellow-600 font-semibold mb-1",children:"Orta"}),e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:l.filter(s=>s.wmape>=5&&s.wmape<10).length}),e.jsx("div",{className:"text-xs text-yellow-600",children:"göl (5-10% hata)"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-sm text-orange-600 font-semibold mb-1",children:"Sınırlı Veri"}),e.jsx("div",{className:"text-2xl font-bold text-orange-700",children:l.filter(s=>s.samples<500).length}),e.jsx("div",{className:"text-xs text-orange-600",children:"göl (<500 kayıt)"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"📊 Metrik Açıklaması:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"WMAPE:"})," Ağırlıklı Ortalama Mutlak Yüzde Hatası - Düşük = İyi"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"R²:"})," Model açıklama gücü - Yüksek = İyi (100% = Mükemmel)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Yeşil Barlar:"})," Mükemmel performans (<2% hata)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Mavi Barlar:"})," İyi performans (2-5% hata)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sarı Barlar:"})," Orta performans (5-10% hata)"]})]})]})]})}export{k as default};
